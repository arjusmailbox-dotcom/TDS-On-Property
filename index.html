<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form 26QB Data Collector (Internal Use Only)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8; /* Light gray background */
        }
        .form-container {
            max-width: 900px;
            background-color: #ffffff;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.06);
        }
        .section-header {
            background-color: #0d47a1; /* Deep Blue header */
            color: white;
        }
        .input-group label {
            font-weight: 600;
            color: #333;
        }
        .required-asterisk {
            color: #e53e3e; /* Red for mandatory fields */
            margin-left: 4px;
        }
        /* Style to mimic government portal buttons */
        .submit-btn {
            background-color: #1e88e5; /* Government blue */
            transition: background-color 0.3s;
        }
        .submit-btn:hover {
            background-color: #0d47a1;
        }
    </style>
</head>
<body class="p-4 sm:p-8">

    <div class="form-container mx-auto mt-4 rounded-lg">
        <!-- Header Mimicking Gov Site -->
        <header class="section-header p-4 rounded-t-lg rounded-b-lg">
            <h1 class="2xl font-bold">Online Form for Furnishing Details Required for Filing TDS on Property</h1>
            <p class="text-sm font-light mt-1">Tax Deducted at Source on Transfer of Immovable Property (Section 194-IA)</p>
        </header>

        <form id="form26qb" class="p-6 md:p-8 space-y-8">

            <!-- Section 1: Transaction Details -->
            <div class="border border-gray-200 rounded-lg p-4 bg-gray-50">
                <h2 class="text-xl font-semibold text-gray-700 border-b pb-2 mb-4">I. Basic Transaction Details</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    
                    <!-- 1. More than one Buyer Field -->
                    <div class="input-group col-span-full">
                        <label class="block mb-2">Whether more than one Buyer as per Agreement<span class="required-asterisk">*</span></label>
                        <div class="flex space-x-6 mt-1">
                            <label class="inline-flex items-center">
                                <input type="radio" name="multipleBuyers" value="Yes" required onchange="toggleSecondApplicant(this.value)"
                                    class="form-radio h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500">
                                <span class="ml-2 text-gray-700">Yes</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="radio" name="multipleBuyers" value="No" required onchange="toggleSecondApplicant(this.value)"
                                    class="form-radio h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500">
                                <span class="ml-2 text-gray-700">No</span>
                            </label>
                        </div>
                    </div>

                    <!-- 2. Conditional Fields for Second Buyer (Initially Hidden) -->
                    <div id="secondBuyerFields" class="grid grid-cols-1 md:grid-cols-2 gap-6 col-span-full hidden border-t border-gray-300 pt-4 mt-4">
                        <div class="input-group">
                            <label for="buyer2Pan">PAN of 2nd Applicant<span class="required-asterisk">*</span></label>
                            <input type="text" id="buyer2Pan" name="buyer2Pan" maxlength="10" 
                                class="w-full mt-1 p-2 border border-gray-300 rounded-md uppercase focus:ring-blue-500 focus:border-blue-500" placeholder="ABCDE1234F">
                        </div>
                        <div class="input-group">
                            <label for="buyer2Name">Name of 2nd Applicant<span class="required-asterisk">*</span></label>
                            <input type="text" id="buyer2Name" name="buyer2Name" 
                                class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                        </div>
                    </div>
                    
                    <!-- 3. Last Installment Field -->
                    <div class="input-group">
                        <label class="block mb-2">Whether it is last installment?<span class="required-asterisk">*</span></label>
                        <div class="flex space-x-6 mt-1">
                            <label class="inline-flex items-center">
                                <input type="radio" name="isLastInstallment" value="Yes" required
                                    class="form-radio h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500">
                                <span class="ml-2 text-gray-700">Yes</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="radio" name="isLastInstallment" value="No" required
                                    class="form-radio h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500">
                                <span class="ml-2 text-gray-700">No</span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- 4. Payment Type (Now Radio Buttons) -->
                    <div class="input-group">
                        <label class="block mb-2">Payment Type<span class="required-asterisk">*</span></label>
                        <div class="flex space-x-6 mt-1">
                            <label class="inline-flex items-center">
                                <input type="radio" name="transactionType" value="lumpSum" required
                                    class="form-radio h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500">
                                <span class="ml-2 text-gray-700">Lump Sum</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="radio" name="transactionType" value="installment" required
                                    class="form-radio h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500">
                                <span class="ml-2 text-gray-700">Installment</span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 2: Buyer (Deductor) Details -->
            <div class="border border-gray-200 rounded-lg p-4">
                <h2 class="text-xl font-semibold text-gray-700 border-b pb-2 mb-4">II. Details of Buyer</h2>
                
                <!-- START 1ST APPLICANT DETAILS BLOCK -->
                <div id="applicant1Details">
                    <!-- CHANGED TEXT COLOR TO INDIGO-700 -->
                    <h3 id="applicant1Heading" class="text-lg font-semibold text-indigo-700 mb-3">Buyer Details</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        
                        <!-- 1. Name of Buyer (UPDATED ORDER) -->
                        <div class="input-group">
                            <label id="buyer1NameLabel" for="buyer1Name">Name of Buyer<span class="required-asterisk">*</span></label>
                            <input type="text" id="buyer1Name" name="buyer1Name" required
                                class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        
                        <!-- 2. PAN of Buyer (UPDATED ORDER) -->
                        <div class="input-group">
                            <label id="buyer1PanLabel" for="buyer1Pan">PAN of Buyer<span class="required-asterisk">*</span></label>
                            <input type="text" id="buyer1Pan" name="buyer1Pan" maxlength="10" required
                                class="w-full mt-1 p-2 border border-gray-300 rounded-md uppercase focus:ring-blue-500 focus:border-blue-500" placeholder="ABCDE1234F">
                        </div>

                        <!-- 3. Residential Status (UPDATED ORDER) -->
                        <div class="input-group">
                            <label for="buyer1Status">Residential Status<span class="required-asterisk">*</span></label>
                            <select id="buyer1Status" name="buyer1Status" required
                                class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                                <option value="resident">Resident</option>
                                <option value="nri">Non-Resident Indian (NRI)</option>
                            </select>
                        </div>
                    </div>

                    <!-- Percentage of Ownership 1st Applicant -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-6">
                        <div class="input-group md:col-span-1">
                            <label for="buyer1Ownership">Percentage of Ownership in %<span class="required-asterisk">*</span></label>
                            <input type="number" id="buyer1Ownership" name="buyer1Ownership" min="1" max="100" required
                                class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" placeholder="e.g., 50">
                        </div>
                        <div class="md:col-span-2"></div>
                    </div>
                    <!-- END: Percentage of Ownership 1st Applicant -->

                    <!-- 1ST APPLICANT CONTACT -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6">
                        <div class="input-group">
                            <label for="buyer1Email">Email ID<span class="required-asterisk">*</span></label>
                            <input type="email" id="buyer1Email" name="buyer1Email" required
                                class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div class="input-group">
                            <label for="buyer1Mobile">Mobile Number<span class="required-asterisk">*</span></label>
                            <input type="tel" id="buyer1Mobile" name="buyer1Mobile" maxlength="10" required
                                class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                        </div>
                    </div>
                    
                    <!-- 1ST APPLICANT ADDRESS Sub-Fields -->
                    <div class="space-y-4 mt-6">
                        <h3 class="text-md font-semibold text-gray-700">Communication Address (Applicant 1)</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="input-group">
                                <label for="buyer1Country">Country<span class="required-asterisk">*</span></label>
                                <input type="text" id="buyer1Country" name="buyer1Country" required
                                    class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                            </div>
                            <div class="input-group">
                                <label for="buyer1Flat">Flat / Door / Building<span class="required-asterisk">*</span></label>
                                <input type="text" id="buyer1Flat" name="buyer1FlatDoorBuilding" required
                                    class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="input-group">
                                <label for="buyer1Road">Road / Street / Block / Sector</label>
                                <input type="text" id="buyer1Road" name="buyer1RoadStreetBlockSector"
                                    class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                            </div>
                            <div class="input-group">
                                <label for="buyer1PinCode">PIN Code<span class="required-asterisk">*</span></label>
                                <input type="text" id="buyer1PinCode" name="buyer1PinCode" maxlength="6" pattern="\d{6}" required
                                    class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" placeholder="6-digit code">
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="input-group">
                                <label for="buyer1PostOffice">Post Office</label>
                                <input type="text" id="buyer1PostOffice" name="buyer1PostOffice"
                                    class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                            </div>
                            <div class="input-group">
                                <label for="buyer1Locality">Area/Locality</label>
                                <input type="text" id="buyer1Locality" name="buyer1AreaLocality"
                                    class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="input-group">
                                <label for="buyer1District">District</label>
                                <input type="text" id="buyer1District" name="buyer1District"
                                    class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                            </div>
                            <div class="input-group">
                                <label for="buyer1State">State</label>
                                <input type="text" id="buyer1State" name="buyer1State"
                                    class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                            </div>
                        </div>
                    </div>
                </div>
                <!-- END 1ST APPLICANT DETAILS BLOCK -->

                
                <!-- START 2ND APPLICANT DETAILS BLOCK (HIDDEN BY DEFAULT) -->
                <div id="applicant2Details" class="hidden border-t border-gray-300 pt-6 mt-6">
                    <!-- CHANGED TEXT COLOR TO TEAL-700 -->
                    <h3 class="text-lg font-semibold text-teal-700 mb-3">2nd Applicant Details</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">

                        <!-- 1. Name of 2nd Applicant (UPDATED ORDER) -->
                        <div class="input-group">
                            <label for="buyer2Name">Name of 2nd Applicant<span class="required-asterisk">*</span></label>
                            <input type="text" id="buyer2Name" name="buyer2Name" 
                                class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                        </div>

                        <!-- 2. PAN of 2nd Applicant (UPDATED ORDER) -->
                        <div class="input-group">
                            <label for="buyer2Pan">PAN of 2nd Applicant<span class="required-asterisk">*</span></label>
                            <input type="text" id="buyer2Pan" name="buyer2Pan" maxlength="10" 
                                class="w-full mt-1 p-2 border border-gray-300 rounded-md uppercase focus:ring-blue-500 focus:border-blue-500" placeholder="ABCDE1234F">
                        </div>

                        <!-- 3. Residential Status (Default to Resident, but configurable) -->
                        <div class="input-group">
                            <label for="buyer2Status">Residential Status<span class="required-asterisk">*</span></label>
                            <select id="buyer2Status" name="buyer2Status"
                                class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                                <option value="resident">Resident</option>
                                <option value="nri">Non-Resident Indian (NRI)</option>
                            </select>
                        </div>
                    </div>

                    <!-- Percentage of Ownership 2nd Applicant -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-6">
                        <div class="input-group md:col-span-1">
                            <label for="buyer2Ownership">Percentage of Ownership in %<span class="required-asterisk">*</span></label>
                            <input type="number" id="buyer2Ownership" name="buyer2Ownership" min="1" max="100" 
                                class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" placeholder="e.g., 50">
                        </div>
                        <div class="md:col-span-2"></div>
                    </div>
                    <!-- END: Percentage of Ownership 2nd Applicant -->

                    <!-- 2ND APPLICANT CONTACT -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6">
                        <div class="input-group">
                            <label for="buyer2Email">Email ID<span class="required-asterisk">*</span></label>
                            <input type="email" id="buyer2Email" name="buyer2Email"
                                class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div class="input-group">
                            <label for="buyer2Mobile">Mobile Number<span class="required-asterisk">*</span></label>
                            <input type="tel" id="buyer2Mobile" name="buyer2Mobile" maxlength="10"
                                class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                        </div>
                    </div>

                    <!-- 2ND APPLICANT ADDRESS Sub-Fields -->
                    <div class="space-y-4 mt-6">
                        <h3 class="text-md font-semibold text-gray-700">Communication Address (Applicant 2)</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="input-group">
                                <label for="buyer2Country">Country<span class="required-asterisk">*</span></label>
                                <input type="text" id="buyer2Country" name="buyer2Country" 
                                    class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                            </div>
                            <div class="input-group">
                                <label for="buyer2Flat">Flat / Door / Building<span class="required-asterisk">*</span></label>
                                <input type="text" id="buyer2Flat" name="buyer2FlatDoorBuilding" 
                                    class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="input-group">
                                <label for="buyer2Road">Road / Street / Block / Sector</label>
                                <input type="text" id="buyer2Road" name="buyer2RoadStreetBlockSector"
                                    class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                            </div>
                            <div class="input-group">
                                <label for="buyer2PinCode">PIN Code<span class="required-asterisk">*</span></label>
                                <input type="text" id="buyer2PinCode" name="buyer2PinCode" maxlength="6" pattern="\d{6}" 
                                    class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" placeholder="6-digit code">
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="input-group">
                                <label for="buyer2PostOffice">Post Office</label>
                                <input type="text" id="buyer2PostOffice" name="buyer2PostOffice"
                                    class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                            </div>
                            <div class="input-group">
                                <label for="buyer2Locality">Area/Locality</label>
                                <input type="text" id="buyer2Locality" name="buyer2AreaLocality"
                                    class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="input-group">
                                <label for="buyer2District">District</label>
                                <input type="text" id="buyer2District" name="buyer2District"
                                    class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                            </div>
                            <div class="input-group">
                                <label for="buyer2State">State</label>
                                <input type="text" id="buyer2State" name="buyer2State"
                                    class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                            </div>
                        </div>
                    </div>
                </div>
                <!-- END 2ND APPLICANT DETAILS BLOCK -->

            </div>

            <!-- Section 3: Seller (Deductee) Details -->
            <div class="border border-gray-200 rounded-lg p-4">
                <h2 class="text-xl font-semibold text-gray-700 border-b pb-2 mb-4">III. Details of Seller</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="input-group">
                        <label for="sellerStatus">Residential Status<span class="required-asterisk">*</span></label>
                        <select id="sellerStatus" name="sellerStatus" required
                            class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                            <option value="resident">Resident</option>
                            <option value="nri">Non-Resident Indian (NRI)</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="sellerPan">PAN of Seller<span class="required-asterisk">*</span></label>
                        <input type="text" id="sellerPan" name="sellerPan" maxlength="10" required
                            class="w-full mt-1 p-2 border border-gray-300 rounded-md uppercase focus:ring-blue-500 focus:border-blue-500" placeholder="ABCDE1234F">
                    </div>
                    <div class="input-group">
                        <label for="sellerName">Name of Seller<span class="required-asterisk">*</span></label>
                        <input type="text" id="sellerName" name="sellerName" required
                            class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6">
                    <div class="input-group">
                        <label for="sellerEmail">Email ID<span class="required-asterisk">*</span></label>
                        <input type="email" id="sellerEmail" name="sellerEmail" required
                            class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                    </div>
                    <div class="input-group">
                        <label for="sellerMobile">Mobile Number<span class="required-asterisk">*</span></label>
                        <input type="tel" id="sellerMobile" name="sellerMobile" maxlength="10" required
                            class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                    </div>
                </div>

                <!-- START: Seller Address Sub-Fields -->
                <div class="space-y-4 mt-6">
                    <h3 class="text-md font-semibold text-gray-700">Communication Address</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="input-group">
                            <label for="sellerCountry">Country<span class="required-asterisk">*</span></label>
                            <input type="text" id="sellerCountry" name="sellerCountry" required
                                class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div class="input-group">
                            <label for="sellerFlat">Flat / Door / Building<span class="required-asterisk">*</span></label>
                            <input type="text" id="sellerFlat" name="sellerFlatDoorBuilding" required
                                class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="input-group">
                            <label for="sellerRoad">Road / Street / Block / Sector</label>
                            <input type="text" id="sellerRoad" name="sellerRoadStreetBlockSector"
                                class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div class="input-group">
                            <label for="sellerPinCode">PIN Code<span class="required-asterisk">*</span></label>
                            <input type="text" id="sellerPinCode" name="sellerPinCode" maxlength="6" pattern="\d{6}" required
                                class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" placeholder="6-digit code">
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="input-group">
                            <label for="sellerPostOffice">Post Office</label>
                            <input type="text" id="sellerPostOffice" name="sellerPostOffice"
                                class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div class="input-group">
                            <label for="sellerLocality">Area/Locality</label>
                            <input type="text" id="sellerLocality" name="sellerAreaLocality"
                                class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="input-group">
                            <label for="sellerDistrict">District</label>
                            <input type="text" id="sellerDistrict" name="sellerDistrict"
                                class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div class="input-group">
                            <label for="sellerState">State</label>
                            <input type="text" id="sellerState" name="sellerState"
                                class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                        </div>
                    </div>
                </div>
                <!-- END: Seller Address Sub-Fields -->
            </div>

            <!-- Section 4: Property Transfer Details -->
            <div class="border border-gray-200 rounded-lg p-4 bg-gray-50">
                <h2 class="text-xl font-semibold text-gray-700 border-b pb-2 mb-4">IV. Property Details</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="input-group">
                        <label for="propertyType">Type of Property<span class="required-asterisk">*</span></label>
                        <select id="propertyType" name="propertyType" required
                            class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                            <option value="">Select Type</option>
                            <option value="land">Land</option>
                            <option value="building">Building</option>
                            <option value="both">Land and Building</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="saleConsideration">Total Value of Consideration (Property Value) in â‚¹<span class="required-asterisk">*</span></label>
                        <input type="number" id="saleConsideration" name="saleConsideration" min="5000000" required
                            class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" placeholder="e.g., 6000000">
                    </div>
                </div>

                <!-- START: Property Address Sub-Fields -->
                <div class="space-y-4 mt-6">
                    <h3 class="text-md font-semibold text-gray-700">Property Address</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="input-group">
                            <label for="propertyCountry">Country<span class="required-asterisk">*</span></label>
                            <input type="text" id="propertyCountry" name="propertyCountry" required
                                class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div class="input-group">
                            <label for="propertyFlat">Flat / Door / Building<span class="required-asterisk">*</span></label>
                            <input type="text" id="propertyFlat" name="propertyFlatDoorBuilding" required
                                class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="input-group">
                            <label for="propertyRoad">Road / Street / Block / Sector</label>
                            <input type="text" id="propertyRoad" name="propertyRoadStreetBlockSector"
                                class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div class="input-group">
                            <label for="propertyPinCode">PIN Code<span class="required-asterisk">*</span></label>
                            <input type="text" id="propertyPinCode" name="propertyPinCode" maxlength="6" pattern="\d{6}" required
                                class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" placeholder="6-digit code">
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="input-group">
                            <label for="propertyPostOffice">Post Office</label>
                            <input type="text" id="propertyPostOffice" name="propertyPostOffice"
                                class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div class="input-group">
                            <label for="propertyLocality">Area/Locality</label>
                            <input type="text" id="propertyLocality" name="propertyAreaLocality"
                                class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="input-group">
                            <label for="propertyDistrict">District</label>
                            <input type="text" id="propertyDistrict" name="propertyDistrict"
                                class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div class="input-group">
                            <label for="propertyState">State</label>
                            <input type="text" id="propertyState" name="propertyState"
                                class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                        </div>
                    </div>
                </div>
                <!-- END: Property Address Sub-Fields -->

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6">
                    <div class="input-group">
                        <label for="dateAgreement">Date of Agreement/Booking<span class="required-asterisk">*</span></label>
                        <input type="date" id="dateAgreement" name="dateAgreement" required
                            class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                    </div>
                    <div class="input-group">
                        <label for="datePayment">Date of Payment/Credit Made to Seller<span class="required-asterisk">*</span></label>
                        <input type="date" id="datePayment" name="datePayment" required
                            class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                    </div>
                </div>
                
                <!-- Total amount paid/ credited in previous installments, if any -->
                <div class="input-group mt-6">
                    <label for="previousInstallments">Total amount paid/ credited in previous installments, if any</label>
                    <input type="number" id="previousInstallments" name="previousInstallmentsTotal" value="0" min="0"
                        class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                </div>
                <!-------------------------------------------------------------------------->

                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-6">
                    <div class="input-group">
                        <label for="amountPaid">Amount Paid/Credited Currently<span class="required-asterisk">*</span></label>
                        <input type="number" id="amountPaid" name="amountPaid" required
                            class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" placeholder="Amount to deduct TDS on">
                    </div>
                    <div class="input-group">
                        <label for="tdsRate">TDS Rate (%)<span class="required-asterisk">*</span></label>
                        <input type="number" id="tdsRate" name="tdsRate" value="1.00" step="0.01" min="0.01" required disabled
                            class="w-full mt-1 p-2 border border-gray-300 rounded-md bg-gray-100 cursor-not-allowed">
                    </div>
                    <div class="input-group">
                        <label for="tdsAmount">TDS Amount Deducted (1% of Amount Paid)<span class="required-asterisk">*</span></label>
                        <input type="text" id="tdsAmount" name="tdsAmount" readonly
                            class="w-full mt-1 p-2 border border-gray-300 rounded-md bg-gray-200 cursor-not-allowed font-bold text-green-700">
                    </div>
                </div>

            </div>

            <!-- Declaration -->
            <div class="flex items-start mt-8">
                <input type="checkbox" id="declaration" name="declaration" required
                    class="h-4 w-4 text-blue-600 border-gray-300 rounded mt-1 focus:ring-blue-500">
                <label for="declaration" class="ml-2 text-sm text-gray-700">I declare that the details furnished above are correct to the best of my knowledge.</label>
            </div>

            <!-- Submit Button -->
            <div class="flex justify-center pt-4">
                <button type="submit" class="submit-btn text-white font-bold py-3 px-8 rounded-lg shadow-lg hover:shadow-xl transition duration-200">
                    Submit Data
                </button>
            </div>
        </form>
    </div>

    <!-- Custom Success/Error Modal -->
    <div id="resultModal" class="fixed inset-0 bg-gray-900 bg-opacity-75 z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-lg shadow-2xl max-w-lg w-full p-6">
            <h3 id="modalTitle" class="text-2xl font-bold mb-4 text-blue-700"></h3>
            <div id="modalContent" class="text-gray-700 space-y-3 text-sm"></div>
            <button onclick="document.getElementById('resultModal').classList.add('hidden')"
                class="mt-6 w-full py-2 submit-btn text-white font-bold rounded-md">
                Close
            </button>
        </div>
    </div>

    <script>
        // References for 1st Applicant
        const applicant1Heading = document.getElementById('applicant1Heading');
        const buyer1PanLabel = document.getElementById('buyer1PanLabel');
        const buyer1NameLabel = document.getElementById('buyer1NameLabel');
        const buyer1OwnershipInput = document.getElementById('buyer1Ownership');
        const buyer1StatusInput = document.getElementById('buyer1Status');
        const buyer1EmailInput = document.getElementById('buyer1Email');
        const buyer1MobileInput = document.getElementById('buyer1Mobile');
        const buyer1CountryInput = document.getElementById('buyer1Country');
        const buyer1FlatInput = document.getElementById('buyer1Flat');
        const buyer1PinCodeInput = document.getElementById('buyer1PinCode');
        
        const originalPanText = 'PAN of Buyer';
        const originalNameText = 'Name of Buyer';

        // References for 2nd Applicant
        const applicant2DetailsDiv = document.getElementById('applicant2Details');
        const buyer2PanInput = document.getElementById('buyer2Pan');
        const buyer2NameInput = document.getElementById('buyer2Name');
        const buyer2OwnershipInput = document.getElementById('buyer2Ownership');
        const buyer2EmailInput = document.getElementById('buyer2Email');
        const buyer2MobileInput = document.getElementById('buyer2Mobile');
        const buyer2CountryInput = document.getElementById('buyer2Country');
        const buyer2FlatInput = document.getElementById('buyer2Flat');
        const buyer2PinCodeInput = document.getElementById('buyer2PinCode');
        const buyer2StatusInput = document.getElementById('buyer2Status');

        // Helper function to set required status for all 2nd Applicant fields
        function setApplicant2Required(isRequired) {
            buyer2PanInput.required = isRequired;
            buyer2NameInput.required = isRequired;
            buyer2OwnershipInput.required = isRequired; 
            buyer2EmailInput.required = isRequired;
            buyer2MobileInput.required = isRequired;
            buyer2CountryInput.required = isRequired;
            buyer2FlatInput.required = isRequired;
            buyer2PinCodeInput.required = isRequired;
            buyer2StatusInput.required = isRequired; // Setting required for status
        }
        
        // Helper function to clear all 2nd Applicant fields
        function clearApplicant2Fields() {
            buyer2PanInput.value = '';
            buyer2NameInput.value = '';
            buyer2OwnershipInput.value = ''; 
            buyer2EmailInput.value = '';
            buyer2MobileInput.value = '';
            buyer2CountryInput.value = '';
            buyer2FlatInput.value = '';
            buyer2PinCodeInput.value = '';
            buyer2StatusInput.value = 'resident'; // Resetting status to a default valid value
            // Clear other address fields (optional but good practice)
            document.getElementById('buyer2Road').value = '';
            document.getElementById('buyer2PostOffice').value = '';
            document.getElementById('buyer2Locality').value = '';
            document.getElementById('buyer2District').value = '';
            document.getElementById('buyer2State').value = '';
        }

        // Function to toggle the second buyer fields and rename the first buyer's fields
        function toggleSecondApplicant(value) {
            const panAsterisk = '<span class="required-asterisk">*</span>';
            const nameAsterisk = '<span class="required-asterisk">*</span>';
            
            // Applicant 1 fields (Ownership) are always required
            buyer1OwnershipInput.required = true;

            if (value === 'Yes') {
                // RENAME 1ST APPLICANT FIELDS AND SHOW HEADING
                applicant1Heading.textContent = '1st Applicant Details';
                // Set color class explicitly if needed, although it's set in HTML now
                // applicant1Heading.classList.add('text-indigo-700'); 
                buyer1PanLabel.innerHTML = `${originalPanText} (1st Applicant)${panAsterisk}`;
                buyer1NameLabel.innerHTML = `${originalNameText} (1st Applicant)${nameAsterisk}`;
                
                // SHOW 2ND APPLICANT FIELDS
                applicant2DetailsDiv.classList.remove('hidden');
                
                // Set required status for 2nd Applicant fields
                setApplicant2Required(true);

            } else {
                // RESTORE ORIGINAL FIELD NAMES
                applicant1Heading.textContent = 'Buyer Details';
                // applicant1Heading.classList.remove('text-indigo-700'); 
                buyer1PanLabel.innerHTML = `${originalPanText}${panAsterisk}`;
                buyer1NameLabel.innerHTML = `${originalNameText}${nameAsterisk}`;

                // HIDE 2ND APPLICANT FIELDS
                applicant2DetailsDiv.classList.add('hidden');
                
                // Remove required status and clear values for 2nd Applicant
                setApplicant2Required(false);
                clearApplicant2Fields();
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            const form = document.getElementById('form26qb');
            const amountPaidInput = document.getElementById('amountPaid');
            const tdsAmountInput = document.getElementById('tdsAmount');
            const tdsRate = 0.01; // 1%
            
            // --- Formspree Configuration ---
            const FORMSPREE_URL = 'https://formspree.io/f/xyzrjoea'; 
            const TARGET_EMAIL = 'arjusmailbox@gmail.com';
            // -------------------------------

            // Ensure initial state is correctly set (hidden)
            const initialBuyerStatus = document.querySelector('input[name="multipleBuyers"]:checked');
            if (initialBuyerStatus) {
                toggleSecondApplicant(initialBuyerStatus.value);
            } else {
                // Default to 'No' state if no radio button is checked initially
                toggleSecondApplicant('No');
            }


            // Function to calculate TDS automatically
            const calculateTDS = () => {
                const amountPaid = parseFloat(amountPaidInput.value) || 0;
                const tdsCalculated = amountPaid * tdsRate;
                tdsAmountInput.value = tdsCalculated.toFixed(2);
            };

            amountPaidInput.addEventListener('input', calculateTDS);

            const showModal = (title, contentHTML) => {
                document.getElementById('modalTitle').textContent = title;
                document.getElementById('modalContent').innerHTML = contentHTML;
                document.getElementById('resultModal').classList.remove('hidden');
            };

            // Enhanced validation for PAN format
            const validatePan = (pan) => {
                const panRegex = /^[A-Z]{5}[0-9]{4}[A-Z]{1}$/;
                return panRegex.test(pan.toUpperCase());
            }

            const handleSubmit = async (event) => {
                event.preventDefault();

                // 1. Client-Side Validation
                const buyer1Pan = document.getElementById('buyer1Pan').value;
                const sellerPan = document.getElementById('sellerPan').value;
                const multipleBuyersSelected = document.querySelector('input[name="multipleBuyers"]:checked')?.value;

                if (!validatePan(buyer1Pan)) {
                    showModal("Validation Error", "Please enter a valid 10-digit PAN for the 1st Applicant.");
                    return;
                }
                
                if (multipleBuyersSelected === 'Yes') {
                    if (!validatePan(buyer2PanInput.value)) {
                        showModal("Validation Error", "Please enter a valid 10-digit PAN for the 2nd Applicant.");
                        return;
                    }
                }
                
                if (!validatePan(sellerPan)) {
                    showModal("Validation Error", "Please enter a valid 10-digit PAN for the Seller.");
                    return;
                }
                
                // 2. Data Collection
                const formData = new FormData(form);
                const data = {};
                for (let [key, value] of formData.entries()) {
                    // Normalize PAN to uppercase
                    if (key.includes('Pan')) {
                        data[key] = value.toUpperCase();
                    } else {
                        data[key] = value;
                    }
                }
                
                // Add calculated fields for clarity in the email body
                data._subject = `New Form 26QB Data Submission from ${data.buyer1Name}`;
                data.tdsAmount = tdsAmountInput.value;
                data.tdsRate = tdsRate.toFixed(2);
                data.RecipientEmail = TARGET_EMAIL; 

                // 3. ACTUAL Data Submission via Formspree
                
                try {
                    const response = await fetch(FORMSPREE_URL, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Accept': 'application/json'
                        },
                        body: JSON.stringify(data)
                    });

                    if (response.ok) {
                        const successContent = `
                            <p class="text-green-600 font-semibold text-lg">Submission Successful!</p>
                        `;
                        showModal("Data Submitted", successContent);
                        form.reset(); 
                        // Ensure that after reset, the fields revert to the standard "No" state.
                        toggleSecondApplicant('No'); 

                    } else {
                        const errorData = await response.json();
                        let errorMsg = errorData.error ? `Formspree Error: ${errorData.error}` : 'Unknown submission error.';
                        console.error('Formspree Error Response:', errorData);
                        showModal("Submission Error", `<p>Failed to submit data. Please check the following:</p><ul class="list-disc list-inside mt-2"><li>Is the Formspree hash correctly linked to <code>${TARGET_EMAIL}</code>?</li><li>${errorMsg}</li></ul><p class="mt-2">Please try again later.</p>`);
                    }
                } catch (error) {
                    console.error('Network Error:', error);
                    showModal("Network Error", "Could not connect to the submission service. Please check your internet connection.");
                }
            };

            form.addEventListener('submit', handleSubmit);
            
            // Initial call to ensure TDS field is populated on load if necessary (e.g., if a browser autofills)
            calculateTDS();
        });
    </script>
</body>
</html>
